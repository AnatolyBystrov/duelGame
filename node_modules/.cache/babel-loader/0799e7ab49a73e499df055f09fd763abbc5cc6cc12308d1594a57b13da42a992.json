{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { detectCollision } from '../utils/Collision';\nconst useGameLogic = () => {\n  _s();\n  const [heroes, setHeroes] = useState({\n    hero1: {\n      x: 30,\n      y: 200,\n      radius: 20,\n      dy: 2,\n      color: 'red',\n      bulletColor: 'black',\n      fireRate: 1000\n    },\n    hero2: {\n      x: 770,\n      y: 200,\n      radius: 20,\n      dy: 2,\n      color: 'blue',\n      bulletColor: 'black',\n      fireRate: 1000\n    }\n  });\n  const [bullets, setBullets] = useState({\n    hero1: [],\n    // Array to hold bullets fired by hero1\n    hero2: [] // Array to hold bullets fired by hero2\n  });\n\n  // Update heroes' positions based on dy (speed)\n  const updateHeroes = () => {\n    setHeroes(prevHeroes => {\n      const newHeroes = {\n        ...prevHeroes\n      };\n      Object.keys(newHeroes).forEach(heroKey => {\n        const hero = newHeroes[heroKey];\n        hero.y += hero.dy;\n        if (hero.y <= hero.radius || hero.y >= 400 - hero.radius) {\n          hero.dy = -hero.dy; // Reverse direction if hitting top or bottom\n        }\n      });\n      return newHeroes;\n    });\n  };\n\n  // Fire a bullet in the direction specified (right or left)\n  const fireBullet = (heroKey, direction) => {\n    const hero = heroes[heroKey];\n    if (!hero) {\n      console.error(`Hero with key ${heroKey} not found!`);\n      return;\n    }\n    const newBullet = {\n      x: hero.x + (direction === 'right' ? hero.radius : -hero.radius),\n      y: hero.y,\n      dx: direction === 'right' ? 2 : -2,\n      // Adjust speed for bullet visibility\n      color: hero.bulletColor || 'red' // Ensure bullet color is set\n    };\n    console.log(`Firing bullet from ${heroKey}:`, newBullet);\n    setBullets(prevBullets => ({\n      ...prevBullets,\n      [heroKey]: [...prevBullets[heroKey], newBullet] // Add the new bullet to the correct array\n    }));\n  };\n\n  // Update bullets' positions and handle collisions\n  const updateBullets = () => {\n    setBullets(prevBullets => {\n      const newBullets = {\n        ...prevBullets\n      };\n      Object.keys(newBullets).forEach(key => {\n        newBullets[key] = newBullets[key].map(bullet => {\n          bullet.x += bullet.dx;\n          return bullet;\n        }).filter(bullet => {\n          const targetHero = key === 'bullets1' ? heroes.hero2 : heroes.hero1;\n          if (detectCollision(bullet, targetHero)) {\n            console.log('Collision detected');\n            return false; // Remove bullet on collision\n          }\n          return bullet.x > 0 && bullet.x < 800; // Keep bullets on the screen\n        });\n      });\n      return newBullets;\n    });\n  };\n\n  // Main game loop to update heroes and bullets\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      updateHeroes();\n      updateBullets();\n    }, 1000 / 60); // 60 FPS\n\n    return () => clearInterval(intervalId);\n  }, [heroes, bullets]);\n\n  // Fire bullets based on each hero's fire rate\n  useEffect(() => {\n    const fireInterval1 = setInterval(() => {\n      fireBullet('hero1', 'right');\n    }, heroes.hero1.fireRate);\n    const fireInterval2 = setInterval(() => {\n      fireBullet('hero2', 'left');\n    }, heroes.hero2.fireRate);\n    return () => {\n      clearInterval(fireInterval1);\n      clearInterval(fireInterval2);\n    };\n  }, [heroes.hero1.fireRate, heroes.hero2.fireRate]);\n  return {\n    heroes,\n    bullets,\n    setHeroes\n  };\n};\n_s(useGameLogic, \"yH/C78bnAArIfK/taUUuMncilAs=\");\nexport default useGameLogic;","map":{"version":3,"names":["useState","useEffect","detectCollision","useGameLogic","_s","heroes","setHeroes","hero1","x","y","radius","dy","color","bulletColor","fireRate","hero2","bullets","setBullets","updateHeroes","prevHeroes","newHeroes","Object","keys","forEach","heroKey","hero","fireBullet","direction","console","error","newBullet","dx","log","prevBullets","updateBullets","newBullets","key","map","bullet","filter","targetHero","intervalId","setInterval","clearInterval","fireInterval1","fireInterval2"],"sources":["/Users/anatoliybystrov/Desktop/DuelGame/src/hooks/useGameLogic.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { detectCollision } from '../utils/Collision';\n\nconst useGameLogic = () => {\n  const [heroes, setHeroes] = useState({\n    hero1: { x: 30, y: 200, radius: 20, dy: 2, color: 'red', bulletColor: 'black', fireRate: 1000 },\n    hero2: { x: 770, y: 200, radius: 20, dy: 2, color: 'blue', bulletColor: 'black', fireRate: 1000 },\n  });\n\n  const [bullets, setBullets] = useState({\n    hero1: [], // Array to hold bullets fired by hero1\n    hero2: []  // Array to hold bullets fired by hero2\n  });\n\n  // Update heroes' positions based on dy (speed)\n  const updateHeroes = () => {\n    setHeroes((prevHeroes) => {\n      const newHeroes = { ...prevHeroes };\n      Object.keys(newHeroes).forEach((heroKey) => {\n        const hero = newHeroes[heroKey];\n        \n        hero.y += hero.dy;\n\n        if (hero.y <= hero.radius || hero.y >= 400 - hero.radius) {\n          hero.dy = -hero.dy; // Reverse direction if hitting top or bottom\n        }\n      });\n      return newHeroes;\n    });\n  };\n\n  // Fire a bullet in the direction specified (right or left)\n  const fireBullet = (heroKey, direction) => {\n    const hero = heroes[heroKey];\n  \n    if (!hero) {\n      console.error(`Hero with key ${heroKey} not found!`);\n      return;\n    }\n  \n    const newBullet = {\n      x: hero.x + (direction === 'right' ? hero.radius : -hero.radius),\n      y: hero.y,\n      dx: direction === 'right' ? 2 : -2,  // Adjust speed for bullet visibility\n      color: hero.bulletColor || 'red',  // Ensure bullet color is set\n    };\n  \n    console.log(`Firing bullet from ${heroKey}:`, newBullet);\n  \n    setBullets((prevBullets) => ({\n      ...prevBullets,\n      [heroKey]: [...prevBullets[heroKey], newBullet],  // Add the new bullet to the correct array\n    }));\n  };\n\n  // Update bullets' positions and handle collisions\n  const updateBullets = () => {\n    setBullets((prevBullets) => {\n      const newBullets = { ...prevBullets };\n      Object.keys(newBullets).forEach((key) => {\n        newBullets[key] = newBullets[key].map((bullet) => {\n          bullet.x += bullet.dx;\n          return bullet;\n        }).filter((bullet) => {\n          const targetHero = key === 'bullets1' ? heroes.hero2 : heroes.hero1;\n          if (detectCollision(bullet, targetHero)) {\n            console.log('Collision detected');\n            return false;  // Remove bullet on collision\n          }\n          return bullet.x > 0 && bullet.x < 800;  // Keep bullets on the screen\n        });\n      });\n      return newBullets;\n    });\n  };\n\n  // Main game loop to update heroes and bullets\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      updateHeroes();\n      updateBullets();\n    }, 1000 / 60);  // 60 FPS\n\n    return () => clearInterval(intervalId);\n  }, [heroes, bullets]);\n\n  // Fire bullets based on each hero's fire rate\n  useEffect(() => {\n    const fireInterval1 = setInterval(() => {\n      fireBullet('hero1', 'right');\n    }, heroes.hero1.fireRate);\n\n    const fireInterval2 = setInterval(() => {\n      fireBullet('hero2', 'left');\n    }, heroes.hero2.fireRate);\n\n    return () => {\n      clearInterval(fireInterval1);\n      clearInterval(fireInterval2);\n    };\n  }, [heroes.hero1.fireRate, heroes.hero2.fireRate]);\n\n  return { heroes, bullets, setHeroes };\n};\n\nexport default useGameLogic;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}